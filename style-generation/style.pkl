/// MapLibre Toner style configuration - Modular version

version = 8
name = "Toner ja"
center = new { 74.5698; 42.8746 }
zoom = 4
bearing = 0
pitch = 0
sources = new {
  ["openmaptiles"] = new {
    ["type"] = "vector"
    ["url"] = "https://tile.openstreetmap.jp/data/planet.json"
  }
  ["takeshima"] = new {
    ["type"] = "vector"
    ["url"] = "https://tile.openstreetmap.jp/data/takeshima.json"
  }
  ["hoppo"] = new {
    ["type"] = "vector"
    ["url"] = "https://tile.openstreetmap.jp/data/hoppo.json"
  }
}
sprite = "https://tile.openstreetmap.jp/styles/maptiler-toner-en/sprite"
glyphs = "https://tile.openstreetmap.jp/fonts/{fontstack}/{range}.pbf"

layers = new {
  // Background layer
  new {
    ["id"] = "background"
    ["type"] = "background"
    ["paint"] = new {
      ["background-color"] = "#fff"
    }
  }
  
  // Water features
  new {
    ["id"] = "water"
    ["type"] = "fill"
    ["source"] = "openmaptiles"
    ["source-layer"] = "water"
    ["filter"] = new {
      "all"
      new { "!="; "brunnel"; "tunnel" }
      new { "=="; "$type"; "Polygon" }
      new { "!="; "intermittent"; 1 }
    }
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["fill-antialias"] = true
      ["fill-color"] = "rgba(0, 0, 0, 0.15)"
    }
  }
  
  // Land use features
  new {
    ["id"] = "landcover"
    ["type"] = "fill"
    ["source"] = "openmaptiles"
    ["source-layer"] = "landcover"
    ["maxzoom"] = 14
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["fill-color"] = new {
        "case"
        new { "=="; new { "get"; "class" }; "grass" }
        "rgba(0, 0, 0, 0.05)"
        new { "=="; new { "get"; "class" }; "scrub" }
        "rgba(0, 0, 0, 0.08)"
        new { "=="; new { "get"; "class" }; "wood" }
        "rgba(0, 0, 0, 0.12)"
        "rgba(0, 0, 0, 0.03)"
      }
      ["fill-opacity"] = 1.0
    }
  }
  
  // Parks
  new {
    ["id"] = "park"
    ["type"] = "fill"
    ["source"] = "openmaptiles"
    ["source-layer"] = "park"
    ["minzoom"] = 6
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["fill-color"] = "rgba(0, 0, 0, 0.06)"
      ["fill-opacity"] = new { 
        "step"
        new { "zoom" }
        0.8
        6; 0.6
        14; 0.4
      }
    }
  }
  
  // Landuse
  new {
    ["id"] = "landuse"
    ["type"] = "fill"
    ["source"] = "openmaptiles"
    ["source-layer"] = "landuse"
    ["minzoom"] = 5
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["fill-color"] = "rgba(0, 0, 0, 0.04)"
      ["fill-opacity"] = new { 
        "step"
        new { "zoom" }
        0.7
        5; 0.6
        14; 0.4
      }
    }
  }
  
  // Railways
  new {
    ["id"] = "rail"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "transportation"
    ["minzoom"] = 13
    ["filter"] = new { "all"; new { "=="; "class"; "rail" } }
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        13; "rgb(150, 150, 150)"
        17; "rgb(80, 80, 80)"
      }
      ["line-width"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        13; 0.85
        17; 2
      }
    }
  }
  
  // Road secondary
  new {
    ["id"] = "road_secondary"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "transportation"
    ["minzoom"] = 10
    ["filter"] = new { 
      "all"
      new { "=="; "$type"; "LineString" }
      new { "!in"; "class"; "pier"; "rail"; "path"; "primary" }
      new { "in"; "class"; "secondary"; "tertiary"; "minor"; "service" }
    }
    ["layout"] = new {
      ["line-cap"] = "round"
      ["line-join"] = "round"
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "step"
        new { "zoom" }
        "rgb(220, 220, 220)"
        10; "rgb(190, 190, 190)"
        12; "rgb(150, 150, 150)"
        15; "rgb(100, 100, 100)"
      }
      ["line-width"] = new {
        "step"
        new { "zoom" }
        0.5
        13; 3
        15; 8
        17; 10
      }
    }
  }
  
  // Road primary
  new {
    ["id"] = "road_primary"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "transportation"
    ["minzoom"] = 8
    ["filter"] = new { 
      "all"
      new { "=="; "$type"; "LineString" }
      new { "!in"; "class"; "pier"; "rail"; "path" }
      new { "=="; "class"; "primary" }
    }
    ["layout"] = new {
      ["line-cap"] = "round"
      ["line-join"] = "round"
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        8; "rgb(240, 240, 240)"
        10; "rgb(180, 180, 180)"
        17; "rgb(100, 100, 100)"
      }
      ["line-width"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        12; 0.75
        15; 6
        17; 8
      }
    }
  }
  
  // Highway casing
  new {
    ["id"] = "road_highway_casing"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "transportation"
    ["minzoom"] = 8
    ["filter"] = new { 
      "all"
      new { "=="; "$type"; "LineString" }
      new { "!in"; "class"; "pier"; "path"; "rail" }
      new { "in"; "class"; "motorway"; "trunk" }
    }
    ["layout"] = new {
      ["line-cap"] = "round"
      ["line-join"] = "round"
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        6; "rgb(245, 245, 245)"
        10; "rgb(255, 255, 255)"
        16; "rgb(255, 255, 255)"
      }
      ["line-opacity"] = 1
      ["line-width"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        10; 4
        16; 16
      }
    }
  }
  
  // Highway center
  new {
    ["id"] = "road_highway"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "transportation"
    ["minzoom"] = 6
    ["filter"] = new { 
      "all"
      new { "=="; "$type"; "LineString" }
      new { "!in"; "class"; "pier"; "path"; "rail" }
      new { "in"; "class"; "motorway"; "trunk" }
    }
    ["layout"] = new {
      ["line-cap"] = "round"
      ["line-join"] = "round"
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        6; "rgb(240, 240, 240)"
        10; "rgb(180, 180, 180)"
        16; "rgb(80, 80, 80)"
      }
      ["line-opacity"] = 1
      ["line-width"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        7; 1
        10; 2
        16; 8
      }
    }
  }
  
  // Buildings
  new {
    ["id"] = "building"
    ["type"] = "fill"
    ["source"] = "openmaptiles"
    ["source-layer"] = "building"
    ["minzoom"] = 13
    ["layout"] = new {
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["fill-antialias"] = true
      ["fill-color"] = "rgba(0, 0, 0, 0.08)"
      ["fill-opacity"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        13; 0.3
        15; 0.6
        17; 0.8
      }
    }
  }
  
  // Administrative boundaries - country
  new {
    ["id"] = "boundary_country"
    ["type"] = "line"
    ["source"] = "openmaptiles"
    ["source-layer"] = "boundary"
    ["minzoom"] = 3
    ["filter"] = new { 
      "all"
      new { "=="; "admin_level"; 2 }
      new { "=="; "$type"; "LineString" }
      new { "!="; "maritime"; 1 }
      new { "!="; "disputed"; 1 }
    }
    ["layout"] = new {
      ["line-cap"] = "round"
      ["line-join"] = "round"
      ["visibility"] = "visible"
    }
    ["paint"] = new {
      ["line-color"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        3; "rgb(180, 180, 180)"
        8; "rgb(160, 160, 160)"
        14; "rgb(140, 140, 140)"
      }
      ["line-width"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        3; 1.0
        8; 2.5
        14; 5.0
      }
      ["line-dasharray"] = new { 3; 2; 1; 2 }
    }
  }
  
  // Place labels - states/provinces
  new {
    ["id"] = "place_state"
    ["type"] = "symbol"
    ["source"] = "openmaptiles"
    ["source-layer"] = "place"
    ["minzoom"] = 4
    ["maxzoom"] = 14
    ["filter"] = new { "all"; new { "=="; "class"; "state" }; new { "=="; "$type"; "Point" } }
    ["layout"] = new {
      ["text-field"] = new {
        "case"
        new { "has"; "name:ja" }
        new { "get"; "name:ja" }
        new { "get"; "name" }
      }
      ["text-font"] = new { "Noto Sans JP Regular"; "Open Sans Regular" }
      ["text-size"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        4; 10
        8; 12
        12; 14
      }
      ["text-transform"] = "uppercase"
      ["visibility"] = "visible"
      ["text-anchor"] = "center"
      ["text-max-width"] = 10
    }
    ["paint"] = new {
      ["text-color"] = "rgba(0, 0, 0, 0.8)"
      ["text-halo-color"] = "rgba(255, 255, 255, 0.9)"
      ["text-halo-width"] = 1.5
    }
  }

  // Place labels - cities
  new {
    ["id"] = "place_city"
    ["type"] = "symbol"
    ["source"] = "openmaptiles"
    ["source-layer"] = "place"
    ["minzoom"] = 7
    ["filter"] = new { "all"; new { "=="; "class"; "city" }; new { "=="; "$type"; "Point" } }
    ["layout"] = new {
      ["text-field"] = new {
        "case"
        new { "has"; "name:ja" }
        new { "get"; "name:ja" }
        new { "get"; "name" }
      }
      ["text-font"] = new { "Noto Sans JP Regular"; "Open Sans Regular" }
      ["text-size"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        7; 10
        10; 12
        14; 16
      }
      ["text-transform"] = "none"
      ["visibility"] = "visible"
      ["text-anchor"] = "center"
      ["text-offset"] = new { 0; 0 }
      ["text-max-width"] = 8
    }
    ["paint"] = new {
      ["text-color"] = "rgba(0, 0, 0, 0.8)"
      ["text-halo-color"] = "rgba(255, 255, 255, 0.9)"
      ["text-halo-width"] = 1.5
    }
  }
  
  // Place labels - countries (最優先表示)
  new {
    ["id"] = "place_country"
    ["type"] = "symbol"
    ["source"] = "openmaptiles"
    ["source-layer"] = "place"
    ["minzoom"] = 2
    ["filter"] = new { "all"; new { "=="; "class"; "country" }; new { "=="; "$type"; "Point" } }
    ["layout"] = new {
      ["text-field"] = new {
        "case"
        new { "has"; "name:ja" }
        new { "get"; "name:ja" }
        new { "get"; "name" }
      }
      ["text-font"] = new { "Noto Sans JP Bold"; "Open Sans Bold" }
      ["text-size"] = new {
        "interpolate"
        new { "linear" }
        new { "zoom" }
        2; 12
        4; 16
        6; 20
      }
      ["text-transform"] = "none"
      ["visibility"] = "visible"
      ["text-anchor"] = "center"
      ["text-max-width"] = 10
      ["text-padding"] = 2
      ["text-allow-overlap"] = true
      ["text-ignore-placement"] = true
      ["symbol-sort-key"] = 1
    }
    ["paint"] = new {
      ["text-color"] = "rgba(0, 0, 0, 1.0)"
      ["text-halo-color"] = "rgba(255, 255, 255, 1.0)"
      ["text-halo-width"] = 2.5
    }
  }
}
