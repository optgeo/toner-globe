/// Background and landcover layers
module toner.layers.Background

import "../config/Colors.pkl"
import "../style.pkl"

/// Type definitions for layers
class FillLayer {
  id: String
  source: String
  `source-layer`: String
  minzoom: Int
  filter: Dynamic
  metadata: Mapping<String, Any>
  paint: Mapping<String, Any>
  layout: Mapping<String, Any>
}

/// Background layer
background: Dynamic = new {
  ["id"] = "background"
  ["type"] = "background"
  ["paint"] = new {
    ["background-color"] = Colors.background
  }
}

/// Grass fill layer
landcover_grass_fill: FillLayer = new FillLayer {
  id = "landcover_grass_fill"
  source = "openmaptiles"
  `source-layer` = "landcover"
  minzoom = 10
  filter = new { "=="; "class"; "grass" }
  metadata = new Mapping {
    ["mapbox:group"] = "1444849388993.3071"
  }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-color"] = new {
      "step"
      new { "zoom" }
      10; Colors.landcover.grass_fill
      16; Colors.landcover.grass_fill_high_zoom
    }
    ["fill-opacity"] = 1
    ["fill-outline-color"] = "rgba(0, 0, 0, 0)"
  }
}

/// Grass pattern layer
landcover_grass_pattern: FillLayer = new FillLayer {
  id = "landcover_grass_pattern"
  source = "openmaptiles"
  `source-layer` = "landcover"
  minzoom = 10
  filter = Dynamic("==", "class", "grass")
  metadata = new Mapping {
    ["mapbox:group"] = "1444849388993.3071"
  }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-opacity"] = new Mapping {
      ["stops"] = new List {
        new List { 10; 0.75 }
        new List { 14; 1 }
      }
    }
    ["fill-outline-color"] = "rgba(94, 94, 94, 0)"
    ["fill-pattern"] = "dash-t"
  }
}

/// Wood fill layer
landcover_wood_fill: FillLayer = new FillLayer {
  id = "landcover_wood_fill"
  source = "openmaptiles"
  `source-layer` = "landcover"
  minzoom = 10
  filter = new List { "=="; "class"; "wood" }
  layout = new Mapping {
    ["visibility"] = "visible"
  }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-color"] = Colors.landcover.wood
    ["fill-opacity"] = 1
  }
}

/// Wood pattern layer
landcover_wood_pattern: FillLayer = new FillLayer {
  id = "landcover_wood_pattern"
  source = "openmaptiles"
  `source-layer` = "landcover"
  minzoom = 10
  filter = new List { "=="; "class"; "wood" }
  layout = new Mapping {
    ["visibility"] = "visible"
  }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-color"] = Colors.landcover.wood
    ["fill-opacity"] = 1
    ["fill-pattern"] = "dots-t"
  }
}

/// Cemetery fill layer
landcover_cemetery_fill: FillLayer = new FillLayer {
  id = "landcover_cemetery_fill"
  source = "openmaptiles"
  `source-layer` = "landuse"
  minzoom = 10
  filter = new List { "all"; new List { "=="; "class"; "cemetery" } }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-color"] = Colors.landcover.cemetery_fill
    ["fill-opacity"] = new Mapping {
      ["stops"] = new List {
        new List { 10; 0.75 }
        new List { 14; 1 }
      }
    }
    ["fill-outline-color"] = Colors.landcover.cemetery_outline
  }
}

/// Cemetery pattern layer
landcover_cemetery_pattern: FillLayer = new FillLayer {
  id = "landcover_cemetery_pattern"
  source = "openmaptiles"
  `source-layer` = "landuse"
  filter = new List { "all"; new List { "=="; "class"; "cemetery" } }
  paint = new Mapping {
    ["fill-antialias"] = true
    ["fill-color"] = "rgba(236, 235, 235, 0)"
    ["fill-opacity"] = new Mapping {
      ["stops"] = new List {
        new List { 10; 0.75 }
        new List { 14; 1 }
      }
    }
    ["fill-outline-color"] = "rgba(75, 75, 75, 0)"
    ["fill-pattern"] = "cross-t"
  }
}
