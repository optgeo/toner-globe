/// Building and land use layers
module toner.layers.Buildings

import "../config/Colors.pkl"
import "Base.pkl"

/// Park areas
park: FillLayer = new FillLayer {
  id = "park"
  source = "openmaptiles"
  `source-layer` = "park"
  minzoom = 6
  layout = new {
    ["visibility"] = "visible"
  }
  metadata = new {}
  paint = new {
    ["fill-color"] = Colors.landuse.park
    ["fill-opacity"] = new { "interpolate"; new { "linear" }; new { "zoom" }; 6; 0.8; 14; 0.6 }
  }
}

/// Landcover (forests, grass)
landcover: FillLayer = new FillLayer {
  id = "landcover"
  source = "openmaptiles"
  `source-layer` = "landcover"
  maxzoom = 14
  layout = new {
    ["visibility"] = "visible"
  }
  paint = new {
    ["fill-color"] = new List {
      ["case"] = new List {
        new List { "=="; new List { "get"; "class" }; "grass"; Colors.landuse.grass }
        new List { "=="; new List { "get"; "class" }; "scrub"; Colors.landuse.scrub }
        new List { "=="; new List { "get"; "class" }; "wood"; Colors.landuse.wood }
        Colors.landuse.default
      }
    }
    ["fill-opacity"] = 0.7
  }
}

/// Landuse areas
landuse: FillLayer = new FillLayer {
  id = "landuse"
  source = "openmaptiles"
  `source-layer` = "landuse"
  minzoom = 5
  layout = new {
    ["visibility"] = "visible"
  }
  metadata = new {}
  paint = new {
    ["fill-color"] = new {
      "case"
      new { "=="; new { "get"; "class" }; "residential" }
      Colors.landuse.residential
      new { "=="; new { "get"; "class" }; "commercial" }
      Colors.landuse.commercial
      new { "=="; new { "get"; "class" }; "industrial" }
      Colors.landuse.industrial
      new { "=="; new { "get"; "class" }; "cemetery" }
      Colors.landuse.cemetery
      new { "=="; new { "get"; "class" }; "hospital" }
      Colors.landuse.hospital
      new { "=="; new { "get"; "class" }; "school" }
      Colors.landuse.school
      new { "=="; new { "get"; "class" }; "pitch" }
      Colors.landuse.pitch
      Colors.landuse.default
    }
    ["fill-opacity"] = new { "interpolate"; new { "linear" }; new { "zoom" }; 5; 0.7; 14; 0.6 }
  }
}

/// Building areas
building: FillLayer = new FillLayer {
  id = "building"
  source = "openmaptiles"
  `source-layer` = "building"
  minzoom = 13
  layout = new {
    ["visibility"] = "visible"
  }
  metadata = new {}
  paint = new {
    ["fill-antialias"] = true
    ["fill-color"] = new { "interpolate"; new { "linear" }; new { "zoom" }; 13; Colors.building.light; 15; Colors.building.medium; 17; Colors.building.dark }
    ["fill-opacity"] = new { "interpolate"; new { "linear" }; new { "zoom" }; 13; 0.6; 15; 0.8; 17; 1 }
  }
}

/// Building outlines
building_outline: LineLayer = new LineLayer {
  id = "building_outline"
  source = "openmaptiles"
  `source-layer` = "building"
  minzoom = 15
  layout = new {
    ["line-cap"] = "square"
    ["line-join"] = "miter"
    ["visibility"] = "visible"
  }
  metadata = new {}
  paint = new {
    ["line-color"] = Colors.building.outline
    ["line-opacity"] = 0.6
    ["line-width"] = new { "interpolate"; new { "linear" }; new { "zoom" }; 15; 0.2; 17; 0.5 }
  }
}
